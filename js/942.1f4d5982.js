"use strict";(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[942],{4942:function(e,s,i){i.r(s),i.d(s,{default:function(){return z}});i(560);var t=i(3396),a=i(9242);const d=e=>((0,t.dD)("data-v-71ddf2be"),e=e(),(0,t.Cn)(),e),o={class:"main"},n={class:"container"},c={class:"main-wrapper"},l=d((()=>(0,t._)("div",{class:"heading d-flex align-items-center"},[(0,t._)("div",{class:"page-heading"},"Мои задания")],-1))),r={key:0,class:"jobs-wrapper d-flex flex-column"},b={key:1,class:"warning-create-job"},p=d((()=>(0,t._)("div",null,"Пусто :(",-1)));function u(e,s,i,d,u,j){const h=(0,t.up)("Loader"),v=(0,t.up)("CardPropsedJobs");return(0,t.wg)(),(0,t.iD)("div",o,[(0,t._)("div",n,[(0,t._)("div",c,[l,u.loading?((0,t.wg)(),(0,t.j4)(h,{key:0,wrapper:!0})):((0,t.wg)(),(0,t.iD)(t.HY,{key:1},[this.jobs?.length?((0,t.wg)(),(0,t.iD)("div",r,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(this.jobs,(e=>((0,t.wg)(),(0,t.j4)(v,{key:e.job_id,job:{date:e.date,name:e.name,description:e.description,price:e.price,job_id:e.job_id},onDelete:s[0]||(s[0]=e=>{j.deleteJob(e)})},null,8,["job"])))),128))])):((0,t.wg)(),(0,t.iD)("div",b,[p,(0,t._)("a",{onClick:s[1]||(s[1]=(0,a.iM)((e=>this.$router.push("/")),["prevent"]))},"Создайте свой первый заказ!")]))],64))])])])}var j=i(7139);const h={class:"card-list d-flex align-items-center"},v={class:"card-list-date"},g={class:"card-list-name d-flex flex-column"},_={class:"card-list-name-f"},w={class:"card-list-name-s"},m={class:"card-list-price"};function f(e,s,i,a,d,o){return(0,t.wg)(),(0,t.iD)("div",h,[(0,t._)("div",v,(0,j.zw)(i.job.date),1),(0,t._)("div",g,[(0,t._)("div",_,(0,j.zw)(i.job.name),1),(0,t._)("div",w,(0,j.zw)(i.job.description),1)]),(0,t._)("div",m,(0,j.zw)(i.job.price)+" Р",1),(0,t._)("button",{class:"card-list-delete",onClick:s[0]||(s[0]=()=>{o.deleteJob(i.job.job_id)})}," Удалить ")])}var k={props:["job"],methods:{deleteJob(e){this.$emit("delete",e)}}},y=i(89);const J=(0,y.Z)(k,[["render",f],["__scopeId","data-v-8aac283a"]]);var D=J,x={components:{CardPropsedJobs:D},data(){return{jobs:null,loading:!0}},methods:{async deleteJob(e){this.jobs=this.jobs.filter((s=>s.job_id!==e)),await this.$store.dispatch("deleteJob",e),console.log("Удалено")},async getJobs(){let e=await this.$store.dispatch("fetchMyExistingJobs");if(console.log(e),!e)return this.loading=!1,void(this.jobs=null);this.jobs=Object.keys(e).map((s=>({job_id:s,name:e[s].name,description:e[s].description,price:e[s].price,date:e[s].date}))).reverse(),this.loading=!1}},async mounted(){await this.getJobs()}};const C=(0,y.Z)(x,[["render",u],["__scopeId","data-v-71ddf2be"]]);var z=C}}]);
//# sourceMappingURL=942.1f4d5982.js.map