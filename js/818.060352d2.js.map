{"version":3,"file":"js/818.060352d2.js","mappings":"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","sources":["webpack://app/./src/pages/Profile.vue","webpack://app/./src/pages/Profile.vue?5f2d"],"sourcesContent":["<template>\r\n    <div class=\"main\">\r\n        <div class=\"container\">\r\n            <div class=\"main-wrapper\">\r\n                <div class=\"heading d-flex align-items-center\">\r\n                    <div class=\"page-heading\">Мои профиль</div>\r\n                </div>\r\n                <Loader :wrapper=\"true\" v-if=\"loading\"/>\r\n                <div \r\n                    class=\"d-flex flex-column\" \r\n                    v-else\r\n                >\r\n                    <form \r\n                        action=\"#\" \r\n                        @submit.prevent=\"saveChanges\"\r\n                        class=\"d-flex flex-column\"\r\n                    >\r\n                        <div class=\"d-flex settings-wrapper\">\r\n                            <div class=\"d-flex flex-column align-items-center settings-avatar-container\">\r\n                                <img class=\"settings-avatar\"  :src=\"''\" ref=\"avatar\">\r\n                                <div \r\n                                    class=\"settings-avatar-upload\"\r\n                                    @click=\"clickInputFile\"\r\n                                    \r\n                                >\r\n                                    Загрузить аватар\r\n                                </div>\r\n                                <input \r\n                                    class=\"settings-avatar-input\" \r\n                                    type=\"file\" \r\n                                    ref=\"inputFile\"\r\n                                    @change=\"(e)=>{uploadAvatar(e); unlockBtnSave()}\"\r\n                                >\r\n                            </div>\r\n                            <div class=\"d-flex flex-column settings-container-right\">\r\n                                <div class=\"d-flex flex-column settings-input-container\">\r\n                                    <div class=\"settings-input-heading\">Имя пользователя</div>\r\n                                    <input \r\n                                        type=\"text\" \r\n                                        class=\"settings-input form-input\" \r\n                                        v-model=\"name\"\r\n                                        @input=\"unlockBtnSave\"\r\n                                    >\r\n                                </div>\r\n                                <div class=\"d-flex flex-column settings-input-container\">\r\n                                    <div class=\"settings-input-heading\">Город</div>\r\n                                    <input \r\n                                        type=\"text\" \r\n                                        class=\"settings-input form-input\" \r\n                                        v-model=\"city\"\r\n                                        @input=\"unlockBtnSave\"\r\n                                    >\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <input \r\n                            type=\"submit\" \r\n                            value=\"Сохранить\"\r\n                            class=\"settings-btn-save\"\r\n                            :disabled=\"btnSaveLock\"\r\n                            :class=\"{'settings-btn-save-lock': btnSaveLock}\"\r\n                        >\r\n                    </form>\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport defaultAvatar from '@/assets/img/default-avatar.png'\r\nexport default{\r\n    data(){\r\n        return {\r\n            loading: true,\r\n            avatar: null,\r\n            name: '',\r\n            city: '',\r\n            initialName: null,\r\n            initialCity: null,\r\n            initialAvatar: null,\r\n            btnSaveLock: true,\r\n        }\r\n    },\r\n    computed: {\r\n        info(){\r\n            return this.$store.getters.info\r\n        }\r\n    },\r\n    watch: {\r\n        info(newValue){\r\n            let {name, city} = newValue;\r\n            this.name = name;\r\n            this.city = city;\r\n            this.fillInitialValues()\r\n        }\r\n    },\r\n    methods:{\r\n        uploadAvatar(e){\r\n            if(e.target.files[0]){\r\n                let img = e.target.files[0];\r\n                this.$refs.avatar.src = URL.createObjectURL(img);\r\n                this.avatar = img;\r\n                console.log(this.avatar,this.avatar === this.initialAvatar)\r\n            }\r\n        },\r\n        async saveChanges(){\r\n            try{\r\n                console.log('save')\r\n                await this.$store.dispatch('saveChanges', {\r\n                    avatar: this.avatar === defaultAvatar ? null : this.avatar, \r\n                    name: this.name === this.initialName ? null : this.name, \r\n                    city: this.city === this.initialCity ? null : this.city\r\n                })\r\n                this.fillInitialValues(true)\r\n                this.btnSaveLock = true;\r\n            } catch (e){\r\n                console.log(e)\r\n            }\r\n        },\r\n        fillInitialValues(withAvatar = false){\r\n            this.initialName = this.name\r\n            this.initialCity = this.city\r\n            if(withAvatar) { this.initialAvatar = this.avatar }\r\n        },\r\n        clickInputFile(){\r\n            this.$refs.inputFile.click()\r\n        },\r\n        getUserData(){\r\n            return this.$store.getters.info\r\n        },\r\n        unlockBtnSave(){\r\n            this.btnSaveLock = true\r\n            if(this.initialName !== this.name){\r\n                this.btnSaveLock = false\r\n            } else \r\n            if (this.initialCity !== this.city) {\r\n                this.btnSaveLock = false\r\n            } else\r\n            if(this.initialAvatar !== this.avatar){ \r\n                this.btnSaveLock = false \r\n            }\r\n            \r\n        }\r\n    },\r\n    async mounted(){\r\n        try{\r\n            this.avatar = await this.$store.dispatch('getAvatar');\r\n            this.initialAvatar = this.avatar\r\n            console.log(this.avatar)\r\n            \r\n            setTimeout(()=>{\r\n                this.$refs.avatar.src = this.avatar;\r\n            }, 0)\r\n\r\n            const userData = this.getUserData();\r\n            if(userData){\r\n                this.name = userData.name;\r\n                this.city = userData.city;\r\n                this.initialName = userData.name;\r\n                this.initialCity = userData.city;\r\n            }\r\n\r\n            this.loading = false;\r\n        }   catch(e){\r\n            console.log(e)\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.main{\r\n    margin-top: 65px;\r\n    flex-grow: 1;\r\n    &-wrapper{   \r\n    }\r\n}\r\n.heading{\r\n    margin-bottom: 65px;\r\n}\r\n.settings{\r\n    &-wrapper{\r\n        column-gap: 100px\r\n    }\r\n\r\n    &-input{\r\n        background-color: #2A2B2E;\r\n        &-container{\r\n            row-gap: 12px;\r\n        }\r\n        &-heading{\r\n            font-size: 18px;\r\n        }\r\n    }\r\n\r\n    &-container{\r\n        &-right{\r\n            flex-grow: 1;\r\n            row-gap: 20px;\r\n        }\r\n    }\r\n\r\n    &-avatar{\r\n        width: 150px;\r\n        height: 150px;\r\n        border-radius: 50%;\r\n        &-container{\r\n            row-gap: 20px;\r\n        }\r\n\r\n        &-upload{\r\n            text-align: center;\r\n            border-radius: 8px;\r\n            color: #65BFF0;\r\n            border: 1px solid #65BFF0;\r\n            font-size: 18px;\r\n            line-height: normal;\r\n            padding: 13px 30px;\r\n            cursor: pointer;\r\n            transition-property: color, border;\r\n            transition-duration: .15s;\r\n\r\n            &:hover{\r\n                border: 1px solid #ACDEF9;\r\n                color: #ACDEF9;\r\n            }\r\n        }\r\n\r\n        &-input{\r\n            display: none;\r\n        }\r\n    }\r\n\r\n    &-btn{\r\n        &-save{\r\n            align-self: end;\r\n            color: #65BFF0;\r\n            border-radius: 8px;\r\n            border: 1px solid ( #65BFF0);\r\n            background-color: transparent;\r\n            padding: 13px 65px;\r\n            font-size: 18px;\r\n            cursor: pointer;\r\n            transition-property: color, border;\r\n            transition-duration: .15s;\r\n            \r\n            &:not([disabled]):hover{\r\n                color: #ACDEF9;\r\n                border: 1px solid ( #ACDEF9);\r\n            }\r\n            \r\n            &-lock{\r\n                cursor: default;\r\n                color: gray;\r\n                border: 1px solid ( gray);\r\n            }\r\n        }\r\n    }\r\n}\r\n</style>","import { render } from \"./Profile.vue?vue&type=template&id=c5159ee2&scoped=true\"\nimport script from \"./Profile.vue?vue&type=script&lang=js\"\nexport * from \"./Profile.vue?vue&type=script&lang=js\"\n\nimport \"./Profile.vue?vue&type=style&index=0&id=c5159ee2&scoped=true&lang=scss\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-c5159ee2\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","src","ref","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","$data","loading","_createBlock","_component_Loader","wrapper","_hoisted_5","action","onSubmit","_cache","_withModifiers","args","$options","saveChanges","_hoisted_6","_hoisted_7","_hoisted_8","onClick","clickInputFile","type","onChange","e","uploadAvatar","unlockBtnSave","_hoisted_9","_hoisted_10","_hoisted_11","name","$event","onInput","_hoisted_12","_hoisted_13","city","value","_normalizeClass","btnSaveLock","disabled","data","avatar","initialName","initialCity","initialAvatar","computed","info","this","$store","getters","watch","newValue","fillInitialValues","methods","target","files","img","$refs","URL","createObjectURL","console","log","dispatch","defaultAvatar","withAvatar","inputFile","click","getUserData","mounted","setTimeout","userData","__exports__","render"],"sourceRoot":""}