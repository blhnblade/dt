"use strict";(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[687],{8687:function(e,i,t){t.r(i),t.d(i,{default:function(){return P}});var s=t(3396),n=t(7139),o=t(9242);const r=e=>((0,s.dD)("data-v-1584e460"),e=e(),(0,s.Cn)(),e),a={key:0,class:"form-container"},l={class:"form"},c={class:"form-header"},d=r((()=>(0,s._)("div",{class:"form-heading"},"Регистрация",-1))),p={class:"form-step-count"},m={class:"form-body"},u={key:0,class:"form-inputs"},f={class:"form-input-container"},v=r((()=>(0,s._)("label",{for:"email"},"E-mail",-1))),h={class:"form-input-container"},y=r((()=>(0,s._)("label",{for:"password"},"Password",-1))),w={key:1,class:"form-inputs"},C={class:"form-input-container"},b=r((()=>(0,s._)("label",{for:"name"},"Как вас зовут?",-1))),k=r((()=>(0,s._)("label",{for:"city"},"Ваш город",-1))),g={class:"form-input-dropdown-container"},_={key:0,class:"form-input-dropdown"},L=["onClick"],x={key:0,class:"form-input-dropdown-item"},$={key:2,class:"form-inputs"},q={class:"form-input-container"},I=r((()=>(0,s._)("label",{for:"name"},"Ваш номер телефона",-1))),D={class:"form-input-container"},E=(0,s.uE)('<label for="agree" class="checkbox-label d-flex align-items-center" data-v-1584e460><div class="checkbox-external" data-v-1584e460><svg class="checkbox-inner" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 9 7" fill="none" data-v-1584e460><path d="M1 4.03906L3.25444 6.29305L8.2917 1.25578" stroke="#989898" data-v-1584e460></path></svg></div><div class="checkbox-text" data-v-1584e460>Я согласен с обработкой персональных данных</div></label>',1),V={class:"form-buttons"};function O(e,i,t,r,O,U){return O.formVisible?((0,s.wg)(),(0,s.iD)("div",a,[(0,s._)("div",l,[(0,s._)("div",c,[d,(0,s._)("div",p,[(0,s._)("div",{class:(0,n.C_)(["form-step",{active:1===O.step}])},"1",2),(0,s._)("div",{class:(0,n.C_)(["form-step",{active:2===O.step}])},"2",2),(0,s._)("div",{class:(0,n.C_)(["form-step",{active:3===O.step}])},"3",2)])]),(0,s._)("div",m,[1===O.step?((0,s.wg)(),(0,s.iD)("div",u,[(0,s._)("div",f,[v,(0,s.wy)((0,s._)("input",{type:"text",id:"email",class:(0,n.C_)(["form-input",{"form-input-error":O.v$.email.$error}]),"onUpdate:modelValue":i[0]||(i[0]=e=>O.email=e),autocomplete:"off"},null,2),[[o.nr,O.email]])]),(0,s._)("div",h,[y,(0,s.wy)((0,s._)("input",{type:"password",id:"password",class:(0,n.C_)(["form-input",{"form-input-error":O.v$.password.$error}]),"onUpdate:modelValue":i[1]||(i[1]=e=>O.password=e),autocomplete:"off"},null,2),[[o.nr,O.password]])])])):(0,s.kq)("",!0),2===O.step?((0,s.wg)(),(0,s.iD)("div",w,[(0,s._)("div",C,[b,(0,s.wy)((0,s._)("input",{type:"text",id:"name",class:(0,n.C_)(["form-input",{"form-input-error":O.v$.name.$error}]),"onUpdate:modelValue":i[2]||(i[2]=e=>O.name=e),autocomplete:"off"},null,2),[[o.nr,O.name]])]),(0,s._)("div",{class:"form-input-container",onClick:i[6]||(i[6]=(0,o.iM)((()=>{}),["stop"]))},[k,(0,s._)("div",g,[(0,s._)("div",{onClick:i[5]||(i[5]=(...e)=>U.openCityList&&U.openCityList(...e))},[(0,s.wy)((0,s._)("input",{type:"text",id:"city",class:(0,n.C_)(["form-input",{"form-input-error":O.v$.city.$error||O.notCityInList}]),"onUpdate:modelValue":i[3]||(i[3]=e=>O.city=e),autocomplete:"off",placeholder:"Выберите город",onInput:i[4]||(i[4]=(...e)=>U.filterCity&&U.filterCity(...e))},null,34),[[o.nr,O.city]])]),O.cityListIsOpen?((0,s.wg)(),(0,s.iD)("div",_,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(O.filterCities,(e=>((0,s.wg)(),(0,s.iD)("div",{class:"form-input-dropdown-item",key:e,onClick:()=>{U.changeCity(e)}},(0,n.zw)(e),9,L)))),128)),O.filterCities.length?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",x," Пусто :( "))])):(0,s.kq)("",!0)])])])):(0,s.kq)("",!0),3===O.step?((0,s.wg)(),(0,s.iD)("div",$,[(0,s._)("div",q,[I,(0,s.wy)((0,s._)("input",{type:"text",id:"name",class:(0,n.C_)(["form-input",{"form-input-error":O.v$.number.$error}]),"onUpdate:modelValue":i[7]||(i[7]=e=>O.number=e),autocomplete:"off"},null,2),[[o.nr,O.number]])]),(0,s._)("div",D,[(0,s.wy)((0,s._)("input",{type:"checkbox",class:"checkbox-input hidden",id:"agree","onUpdate:modelValue":i[8]||(i[8]=e=>O.userAgree=e)},null,512),[[o.e8,O.userAgree]]),E])])):(0,s.kq)("",!0),(0,s._)("div",V,[3!==O.step?((0,s.wg)(),(0,s.iD)("div",{key:0,class:"form-button-next",onClick:i[9]||(i[9]=e=>O.step++)},"Вперед →")):(0,s.kq)("",!0),3===O.step?((0,s.wg)(),(0,s.iD)("div",{key:1,class:"form-button-next",onClick:i[10]||(i[10]=(...e)=>U.submitForm&&U.submitForm(...e))},"Зарегистрироваться")):(0,s.kq)("",!0),1!==O.step?((0,s.wg)(),(0,s.iD)("div",{key:2,class:"form-button-prev",onClick:i[11]||(i[11]=e=>O.step--)},"← Назад")):(0,s.kq)("",!0)])])])])):(0,s.kq)("",!0)}t(560);var U=t(5420),j=t(4219),A={"Новосибирск":"Novosibirsk","Москва":"Moscow","Екатеринбург":"Ekaterinburg","Санкт-Петербург":"SaintP"},F={data(){return{email:"",password:"",name:"",city:"",number:"+7",userAgree:!1,v$:(0,j.Xw)(),step:1,objectCities:Object.keys(A),filterCities:Object.keys(A),cityListIsOpen:!1,notCityInList:!1,formVisible:!0}},watch:{number(e,i){isNaN(parseInt(e[e.length-1]))&&(this.number=i),e.length>12&&(this.number=i),e.length<2&&(this.number="+7")}},validations:{email:{required:U.C1,minLength:(0,U.Ei)(4),email:U.Do},password:{required:U.C1,minLength:(0,U.Ei)(3)},name:{required:U.C1,minLength:(0,U.Ei)(3)},city:{required:U.C1,minLength:(0,U.Ei)(3)},number:{required:U.C1,minLength:(0,U.Ei)(12)},userAgree:{checked:e=>e}},methods:{async submitForm(){if(!this.objectCities.includes(this.city))return this.notCityInList=!0,void console.log("Нет такого города!");if(this.v$.$invalid)return void this.v$.$touch();let e={email:this.email,password:this.password,name:this.name,city:A[this.city],number:this.number};try{await this.$store.dispatch("register",e),this.formVisible=!1,this.$router.push("/")}catch(i){console.log(i,"Ошибка")}},changeCity(e){this.city=e,this.closeCityList(),console.log(this.city)},openCityList(){this.cityListIsOpen=!0},closeCityList(){this.cityListIsOpen=!1},filterCity(){this.cityListIsOpen||(this.cityListIsOpen=!0),this.notCityInList&&(this.notCityInList=!1),this.filterCities=this.objectCities.filter((e=>e.includes(this.city)))}},mounted(){window.addEventListener("click",this.closeCityList)},beforeUnmount(){window.removeEventListener("click",this.closeCityList)}},M=t(89);const N=(0,M.Z)(F,[["render",O],["__scopeId","data-v-1584e460"]]);var P=N}}]);
//# sourceMappingURL=687.53b20725.js.map